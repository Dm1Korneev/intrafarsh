(this.webpackJsonpintrafarsh=this.webpackJsonpintrafarsh||[]).push([[0],{55:function(e,t,n){e.exports=n(90)},90:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(24),c=n.n(o),u=n(27),i=n(52),l=n(53),s=n(7),p=function(){return function(e){return function(t){return t.payload&&t.payload.error&&console.warn("[Error Middleware error]:",t.payload.error),e(t)}}},f=n(9),d=n(14),m=n(18),v=n(23);var h=function(e){return Object(s.b)("".concat(e,"_REQUEST"))},E=function(e){return Object(s.b)("".concat(e,"_SUCCESS"))},b=function(e){return Object(s.b)("".concat(e,"_FAILURE"))},g=h("APP_START"),O=h("GET_ROUTES"),w=Object(s.b)("SET_ROUTES"),x=h("GET_ROUTE_POINTS"),j=Object(s.b)("SET_ROUTE_POINTS"),C=Object(s.c)([],(function(e){return e.addCase(w,(function(e,t){return t.payload.routes}))})),T=Object(s.c)({},(function(e){return e.addCase(j,(function(e,t){return Object(m.a)({},e,Object(d.a)({},t.payload.routeID,t.payload.routePoints))}))})),F=Object(f.combineReducers)({loaded:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)return e;var n=t.type,r=/(.*)_(SUCCESS)/.exec(n);if(!r)return e;var a=Object(v.a)(r,2),o=a[1];return Object(m.a)({},e,Object(d.a)({},o,!0))},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)return e;var n=t.type,r=/(.*)_(REQUEST|SUCCESS|FAILURE)/.exec(n);if(!r)return e;var a=Object(v.a)(r,3),o=a[1],c=a[2];return Object(m.a)({},e,Object(d.a)({},o,"REQUEST"===c))},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=/(.*)_(REQUEST|FAILURE)/.exec(n);if(!a)return e;var o=Object(v.a)(a,3),c=o[1],u=o[2];return Object(m.a)({},e,Object(d.a)({},c,"FAILURE"===u?r&&r.error:""))},routes:C,routePoints:T}),R=n(17),I=n.n(R),S=n(11),P="".concat("https://intrafarsh.ru/api","/rpc"),y=function(e){return new Promise((function(t){return e.json().then((function(n){return t({response:e,result:n})}))}))},U=function(e){return new Promise((function(t,n){fetch(P,function(e){return{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",mode:"cors",body:JSON.stringify(e)}}(e)).then(y).then((function(e){var r=e.response,a=e.result;return r.ok?t(a.result):n(a)})).catch((function(e){return n(e)}))}))},k=function(e,t,n){return{method:e,params:t,id:n}},_=function(){return U(k("Routes"))},L=function(e){var t=e.routeID;return U(k("RoutePoints",{RouteID:t}))},M=I.a.mark(D);function D(){var e;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(S.b)(_);case 3:return e=t.sent,t.next=6,Object(S.c)(w({routes:e}));case 6:return t.next=8,Object(S.c)(E("GET_ROUTES")({routes:e}));case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,Object(S.c)(b("GET_ROUTES")({error:t.t0.message}));case 14:case"end":return t.stop()}}),M,null,[[0,10]])}var N=I.a.mark(A);function A(e){var t,n;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.routeID,r.prev=1,r.next=4,Object(S.b)(L,{routeID:t});case 4:return n=r.sent,r.next=7,Object(S.c)(j({routePoints:n,routeID:t}));case 7:return r.next=9,Object(S.c)(E("GET_ROUTE_POINTS")({routePoints:n}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,Object(S.c)(b("GET_ROUTE_POINTS")({error:r.t0.message}));case 15:case"end":return r.stop()}}),N,null,[[1,11]])}var H=I.a.mark(z);function z(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S.a,e.next=3,Object(S.d)(h("GET_ROUTES").type,D);case 3:return e.t1=e.sent,e.next=6,Object(S.d)(h("GET_ROUTE_POINTS").type,A);case 6:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=10,(0,e.t0)(e.t3);case 10:case"end":return e.stop()}}),H)}var B=function(){var e=Object(l.a)(),t=Object(s.a)({reducer:F,middleware:[].concat(Object(i.a)(Object(s.d)()),[p,e]),devTools:!1});return e.run(z),t},G=function(e,t){var n=t.mapStateToProps,r=void 0===n?null:n,a=t.mapDispatchToProps,o=void 0===a?null:a,c=e;if(r||o){var i=o?function(e){return Object(f.bindActionCreators)(o,e)}:null;c=Object(u.b)(r,i)(e)}return c},Z=n(20),Q=n(21),J=function(e){return e.routes},V=n(5),W=n(6);function Y(){var e=Object(V.a)(["\n    width: 54px;\n    height: 54px;\n    border-radius: 50%;\n"]);return Y=function(){return e},e}var K=W.a.img(Y()),X=function(e){var t=e.url,n=e.name;return a.a.createElement(K,{src:t,alt:"Avatar of ".concat(n)})};function $(){var e=Object(V.a)(["\n    width: 194px;\n    height: 34px;\n    background: #1E0455;\n    opacity: 0.75;\n    color: #FFFFFF;\n    box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3);\n    border-radius: 10px;\n    font-size: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]);return $=function(){return e},e}var q=W.a.div($()),ee=function(e){var t=e.title;return a.a.createElement(q,null,t)};function te(){var e=Object(V.a)(["\n    padding-left: 5px;\n"]);return te=function(){return e},e}function ne(){var e=Object(V.a)(["\n    padding-left: 10px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n"]);return ne=function(){return e},e}var re=W.a.div(ne()),ae=W.a.span(te()),oe=function(){return a.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.98392 20.5641C3.60754 20.6268 3.31395 20.2435 3.47255 19.8964L4.89218 16.79C3.94509 15.3876 3.42947 13.7318 3.42947 11.9995C3.42947 7.26592 7.26683 3.42856 12.0005 3.42856C16.7341 3.42856 20.5714 7.26592 20.5714 11.9995C20.5714 16.7332 16.7341 20.5705 12.0005 20.5705C10.7696 20.5705 9.57474 20.3106 8.47734 19.8152L3.98392 20.5641ZM8.46554 18.8516C8.56129 18.8357 8.65964 18.8494 8.7474 18.8909C9.75544 19.3676 10.8597 19.6182 12.0005 19.6182C16.2081 19.6182 19.6191 16.2072 19.6191 11.9995C19.6191 7.79187 16.2081 4.38089 12.0005 4.38089C7.79279 4.38089 4.3818 7.79187 4.3818 11.9995C4.3818 13.6251 4.89157 15.1726 5.82415 16.4612C5.92468 16.6001 5.94277 16.7823 5.8715 16.9383L4.71113 19.4774L8.46554 18.8516ZM9.05689 9.59708C9.05689 9.82419 9.241 10.0083 9.46812 10.0083H15.2254C15.4525 10.0083 15.6366 9.82419 15.6366 9.59708C15.6366 9.36996 15.4525 9.18584 15.2254 9.18584H9.46812C9.241 9.18584 9.05689 9.36996 9.05689 9.59708ZM9.05689 12.0645C9.05689 12.2916 9.241 12.4757 9.46812 12.4757H15.2254C15.4525 12.4757 15.6366 12.2916 15.6366 12.0645C15.6366 11.8374 15.4525 11.6532 15.2254 11.6532H9.46812C9.241 11.6532 9.05689 11.8374 9.05689 12.0645ZM9.46812 14.9431C9.241 14.9431 9.05689 14.759 9.05689 14.5319C9.05689 14.3048 9.241 14.1207 9.46812 14.1207H13.5805C13.8076 14.1207 13.9917 14.3048 13.9917 14.5319C13.9917 14.759 13.8076 14.9431 13.5805 14.9431H9.46812Z",fill:"#B5BBC6"}))},ce=function(e){var t=e.count;return a.a.createElement(re,null,a.a.createElement(oe,null),a.a.createElement(ae,null,t))};function ue(){var e=Object(V.a)(["\n    padding-left: 5px;\n"]);return ue=function(){return e},e}function ie(){var e=Object(V.a)(["\n    padding-left: 10px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n"]);return ie=function(){return e},e}var le=W.a.div(ie()),se=W.a.span(ue()),pe=function(){return a.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5714 9.50346H20.5629C20.5181 6.74463 18.3848 4.28571 15.7505 4.28571C14.2267 4.28571 12.8838 5.12174 12 6.34928C11.1162 5.12174 9.77335 4.28571 8.24954 4.28571C5.61526 4.28571 3.48192 6.74463 3.43716 9.50346H3.42859C3.42859 9.52081 3.43145 9.53624 3.43145 9.55263C3.43145 9.56517 3.42859 9.57771 3.42859 9.59121C3.42859 9.66835 3.44668 9.72717 3.45049 9.80142C3.68573 16.832 11.9324 19.7143 11.9324 19.7143C11.9324 19.7143 20.3 16.8349 20.5476 9.81203C20.5524 9.73392 20.5714 9.67221 20.5714 9.59121C20.5714 9.57771 20.5686 9.56517 20.5686 9.55263C20.5686 9.53431 20.5714 9.51985 20.5714 9.50346Z",fill:"#E00000"}),a.a.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"3",y:"4",width:"18",height:"16"},a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5714 9.50346H20.5629C20.5181 6.74463 18.3848 4.28571 15.7505 4.28571C14.2267 4.28571 12.8838 5.12174 12 6.34928C11.1162 5.12174 9.77335 4.28571 8.24954 4.28571C5.61526 4.28571 3.48192 6.74463 3.43716 9.50346H3.42859C3.42859 9.52081 3.43145 9.53624 3.43145 9.55263C3.43145 9.56517 3.42859 9.57771 3.42859 9.59121C3.42859 9.66835 3.44668 9.72717 3.45049 9.80142C3.68573 16.832 11.9324 19.7143 11.9324 19.7143C11.9324 19.7143 20.3 16.8349 20.5476 9.81203C20.5524 9.73392 20.5714 9.67221 20.5714 9.59121C20.5714 9.57771 20.5686 9.56517 20.5686 9.55263C20.5686 9.53431 20.5714 9.51985 20.5714 9.50346Z",fill:"white"})),a.a.createElement("g",{mask:"url(#mask0)"}))},fe=function(e){var t=e.count;return a.a.createElement(le,null,a.a.createElement(pe,null),a.a.createElement(se,null,t))};function de(){var e=Object(V.a)(["\n    flex-grow: 1;\n    font-size: 18px;\n"]);return de=function(){return e},e}function me(){var e=Object(V.a)(["\n    height: 28px;\n    padding-left: 65px;\n    padding-right: 15px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n"]);return me=function(){return e},e}function ve(){var e=Object(V.a)(["\n    border-top-left-radius: 30px;\n    border-bottom-left-radius: 30px;\n    overflow: hidden;\n    height: 100%;\n    width: 100%;\n    background: linear-gradient(310.8deg, #FFFFFF -30.5%, rgba(255, 255, 255, 0) 80.89%), \n        url(",");\n    background-size: cover;    \n"]);return ve=function(){return e},e}function he(){var e=Object(V.a)(["\n    position: absolute;\n    left: 70px;\n    bottom: -17px;\n"]);return he=function(){return e},e}function Ee(){var e=Object(V.a)(["\n    position: absolute;\n    left: 0px;\n    top: -27px;\n"]);return Ee=function(){return e},e}function be(){var e=Object(V.a)(["\n    position: relative;\n    height: 190px;\n"]);return be=function(){return e},e}function ge(){var e=Object(V.a)(["\n    padding-top: 18px;\n    padding-bottom: 27px;\n"]);return ge=function(){return e},e}var Oe=W.a.div(ge()),we=W.a.div(be()),xe=W.a.div(Ee()),je=W.a.div(he()),Ce=W.a.div(ve(),(function(e){return e.url})),Te=W.a.div(me()),Fe=W.a.div(de()),Re=function(e){var t=e.RouterName,n=e.RouteID,r=e.ImageUrl,o=e.User,c=o.Name,u=o.Photo;return a.a.createElement(Oe,null,a.a.createElement(Z.b,{to:"/route/".concat(n)},a.a.createElement(Te,null,a.a.createElement(Fe,null,c),a.a.createElement(ce,{count:348}),a.a.createElement(fe,{count:348})),a.a.createElement(we,null,a.a.createElement(Ce,{url:r}),a.a.createElement(je,null,a.a.createElement(ee,{title:t})),a.a.createElement(xe,null,a.a.createElement(X,{url:u,name:c})))))};function Ie(){var e=Object(V.a)(["\n    height: 50px;\n    display: flex;\n    align-items: center;\n    padding: 30px;\n    justify-content: space-between;\n"]);return Ie=function(){return e},e}var Se=W.a.div(Ie()),Pe=function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),a.a.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",fill:"#FFFFFF"}))},ye=function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),a.a.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z",fill:"#FFFFFF"}))},Ue=function(){return a.a.createElement(Se,null,a.a.createElement(Pe,null),a.a.createElement(ye,null))};function ke(){var e=Object(V.a)(["\n    border-top-left-radius: 40px;\n    padding-left: 16px;\n    padding-bottom: 1rem;\n    background-color: #FFFFFF;\n    min-height: 100vh;\n"]);return ke=function(){return e},e}function _e(){var e=Object(V.a)(["\n    min-height: 100vh;\n    background: linear-gradient(90deg, #00AAFF 0%, #6B00F4 100%);\n"]);return _e=function(){return e},e}var Le=W.a.main(_e()),Me=W.a.div(ke()),De=G((function(e){var t=e.getRoutes,n=e.routes;return Object(r.useEffect)((function(){t()}),[t]),a.a.createElement(Le,null,a.a.createElement(Ue,null),a.a.createElement(Me,null,n.map((function(e){return a.a.createElement(Re,Object.assign({key:e.RouteID},e))}))))}),{mapDispatchToProps:{getRoutes:O},mapStateToProps:function(e){return{routes:J(e)}}}),Ne=n(35),Ae=function(e){return e.routePoints},He=function(e,t){return Object(Ne.a)(Ae,(function(e){return e[t]||[]}))(e)},ze=n(50),Be=n.n(ze),Ge=n(51);function Ze(){var e=Object(V.a)(["\n    height: 100vh;\n    width: 100%;\n"]);return Ze=function(){return e},e}var Qe=W.a.div(Ze()),Je=function(e){var t=e.getRoutePoints,n=e.routeID,o=e.routePoints;if(Object(r.useEffect)((function(){t({routeID:n})}),[t,n]),!o.length)return null;var c={ne:{lat:0,lng:0},sw:{lat:Number.POSITIVE_INFINITY,lng:Number.POSITIVE_INFINITY}};o.forEach((function(e){c.ne.lat=Math.max(c.ne.lat,e.Latitude),c.ne.lng=Math.max(c.ne.lng,e.Longitude),c.sw.lat=Math.min(c.sw.lat,e.Latitude),c.sw.lng=Math.min(c.sw.lng,e.Longitude)})),c.ne.lat+=.001,c.ne.lng+=.001,c.sw.lat-=.001,c.sw.lng-=.001;var u={width:window.screen.width,height:window.screen.height},i=Object(Ge.fitBounds)(c,u),l=i.center,s=i.zoom;return a.a.createElement(Qe,null,a.a.createElement(Be.a,{bootstrapURLKeys:{key:"AIzaSyDs6JpHvMQeNZPleYdZXSzzAI4LygkUbuQ"},defaultCenter:l,defaultZoom:s,streetViewControl:!1,mapTypeControl:!1,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){return function(e,t){o.map((function(n){return new t.Marker({position:{lat:n.Latitude,lng:n.Longitude},map:e,title:n.PointName})}))}(e.map,e.maps)}}))};Je.defaultProps={routePoints:[]};var Ve=G(Je,{mapDispatchToProps:{getRoutePoints:x},mapStateToProps:function(e,t){var n=t.match.params.routeID;return{routePoints:He(e,n),routeID:n}}}),We=function(){return a.a.createElement("div",null,"Place page")},Ye=function(){return a.a.createElement("nav",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(Z.b,{to:"/routes"},"Routes")),a.a.createElement("li",null,a.a.createElement(Z.b,{to:"/route"},"Route")),a.a.createElement("li",null,a.a.createElement(Z.b,{to:"/place"},"Place"))))},Ke=G((function(e){var t=e.appStart;return Object(r.useEffect)((function(){t()}),[t]),a.a.createElement(Z.a,null,a.a.createElement(Q.c,null,a.a.createElement(Q.a,{path:"/routes",component:De}),a.a.createElement(Q.a,{path:"/route/:routeID",component:Ve}),a.a.createElement(Q.a,{path:"/place",component:We}),a.a.createElement(Q.a,{path:"/",component:Ye})))}),{mapDispatchToProps:{appStart:g}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(u.a,{store:B()},a.a.createElement(Ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[55,1,2]]]);
//# sourceMappingURL=main.749c172e.chunk.js.map